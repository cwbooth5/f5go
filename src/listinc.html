  <!-- This file defines macros imported on index.html. -->
  {% macro m_linkrender(idx, link, username, linkid)-%}
  <tr>
  <td>
  <b>
   <a title="TODO: click info goes here!" class="pull-left fineprint" style="width: 1em;">#{% if idx > 0 %}{{ idx }}{% else %}&nbsp;{% endif %}</a>
   </b>
   <div class="container-fluid link" id="{{ linkid }}">
    <div class="shallow">
      <a title="{{ link.title }}" href="{{ link.name }}">
        <div class="shallow example span4">
           <b>go/{{ link.name }}</b>
        </div>
      </a>
      <div class="shallow span8"><a href="{{ tools.canonicalUrl(link.url) }}"</a>{{ link.title }}</div>
      
    </div>
      <div class="fineprint shallow meta text">
      </div>
  </div>
  </td>
    <td>{{ m_editlink(link, username) }}</td>
  </tr>
  {%- endmacro %}




  {# this macro is called from the one above #}
  {% macro m_editlink(link, username) -%}
      <div class="pull-right">
        <a

      {# note that the <a tag is not closed here. That is intentional.#}
      {% if link.edits %}
        {% set lastEditName, lastEditTime = tools.getedits(link.linkid, mostrecent=True) %}
        title="edited {{ lastEditTime|time_t }} by {{ lastEditName }}"
      {% else %}
        title="edit"
      {% endif %}
        href="/_edit_/{{ link.linkid }}{% if username %}?returnto={{ keyword }}{% endif %}"><img border="0" src="/images/edititem.gif"></a>
      </div>
  {%- endmacro %}












  {% macro clickstats(L) -%}
  {% if L.clicks %}
  <div style="padding-top: 1em; clear: both;">
      <p>{{ L.clickinfo() }}</p>
  </div>
  {% endif %}
  {%- endmacro %}












  {% macro renderlink(idx, link, username) -%}
  <tr>
  <td>
  <b>
   <a title="{{ link.clickinfo() }}" class="pull-left fineprint" style="width: 1em;">#{% if idx > 0 %}{{ idx }}{% else %}&nbsp;{% endif %}</a>
   </b>
   <div class="container-fluid link" id="{{ link.linkid }}">
    <div class="shallow">

         {% set usage = link.usage() %}
      <a title="{{ link._url }}" href="{{ link.url() }}">
        <div class="shallow example span4">
         {% if usage != "" %}
           <b>go/{{ usage }}</b>
         {% else %}
           &nbsp;
         {% endif %}
        </div>

        <div class="shallow span8">{{ link.title or link._url|truncate(80, True) }}</div>
      </a>
    </div>
      <div class="fineprint shallow meta text">
        {% for K in link.lists if K.name and K.usage() != usage: %}
        {% set flDirect = K.goesDirectlyTo(link) %}
        <a href="/.{{ K.name|escapekeyword }}" title="{{ K.clickinfo() }}">{% if flDirect %}<b>{{ K.usage() }}</b>{% else %}<i>{{ K.usage() }}</i>{% endif %}</a>
        {% endfor %}
      </div>


  </div>
  </td>

  </tr>
  {%- endmacro %}

